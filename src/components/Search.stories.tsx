import type { Meta, StoryObj } from '@storybook/react'
import Search from './Search'

const meta: Meta<typeof Search> = {
  title: 'Components/Inputs/Search',
  component: Search,
  parameters: {
    layout: 'centered',
    docs: {
      description: {
        component: `
# Search（検索コンポーネント）

グローバル検索機能を提供する入力フィールドコンポーネントです。アプリケーション全体での情報検索に使用されます。

## 設計思想

### ユーザビリティ優先
- **直感的操作**: 検索アイコンによる機能の即座の理解
- **レスポンシブ対応**: デバイスサイズに応じた幅の自動調整
- **アクセシブル**: スクリーンリーダーに対応したaria-label設定

### 視覚的一貫性
- **Material Design**: MUIのOutlinedInputによる統一されたスタイル
- **テーマ統合**: ライト/ダークモードでの適切な色調整
- **コンパクトサイズ**: ヘッダーエリアに収まる小さなフォームファクター

## 主な機能

### 検索入力
- **プレースホルダー**: "Search…" による機能説明
- **フォーカス状態**: 入力時の視覚的フィードバック
- **クリア可能**: 入力内容の削除とリセット

### 視覚的要素
- **検索アイコン**: SearchRoundedIconによる機能の明示
- **アイコン配置**: 左側開始位置での一貫した配置
- **カラー統合**: text.primaryカラーでの統一感

## レスポンシブ動作

### 幅の自動調整
- **モバイル（xs）**: 100%の全幅表示
- **デスクトップ（md以上）**: 25ch（約25文字分）の固定幅

### 適応的レイアウト
- **flexGrow**: 利用可能スペースでの適切な伸縮
- **コンテナ統合**: 親要素のレイアウトに適応

## 技術的特徴

### アクセシビリティ
- **aria-label**: スクリーンリーダー向けの説明
- **セマンティック**: FormControlによる適切なフォーム構造
- **キーボード操作**: Tab/Shift+Tabでのフォーカス移動

### Material-UI統合
- **OutlinedInput**: 一貫したマテリアルデザイン
- **InputAdornment**: アイコンの適切な配置
- **FormControl**: フォーム要素の標準化された管理

## 使用場面

### グローバル検索
- **コンテンツ検索**: ページやドキュメントの横断検索
- **ユーザー検索**: 顧客やメンバーの名前・メール検索
- **データ検索**: レコードやエントリーの迅速な発見

### フィルタリング
- **リアルタイム絞り込み**: 入力に応じた即座の結果更新
- **複合検索**: 複数条件での詳細検索
- **履歴検索**: 過去の検索クエリの再利用

### ナビゲーション支援
- **機能発見**: アプリケーション機能の検索
- **ショートカット**: よく使う画面への迅速な移動
- **ヘルプ検索**: サポート情報やFAQの検索

## UXパターン

### 検索体験の最適化
- **インクリメンタル検索**: 入力中のリアルタイム結果表示
- **オートコンプリート**: 入力補完による効率的な検索
- **検索候補**: 過去の検索履歴や人気クエリの提案

### パフォーマンス配慮
- **デバウンス**: 入力停止後の検索実行で負荷軽減
- **キャッシュ活用**: 同一クエリの結果保存
- **プログレッシブ**: 段階的な結果読み込み

## 実装の拡張性

### カスタマイズオプション
- **プレースホルダー変更**: 検索対象に応じたテキスト調整
- **アイコン変更**: 用途に応じた異なるアイコンの使用
- **サイズ調整**: small/medium/largeでのサイズ変更

### 機能拡張
- **高度な検索**: フィルターやソートオプションの追加
- **検索結果**: ドロップダウンでの候補表示
- **ショートカット**: キーボードショートカット（Ctrl/Cmd+K）の対応

## アクセシビリティ詳細

### キーボードナビゲーション
- **フォーカス管理**: 明確なフォーカス表示
- **操作可能性**: Enter/Escapeキーでの操作
- **タブ順序**: 論理的なナビゲーション順序

### スクリーンリーダー対応
- **役割の明示**: 検索機能であることの明確な表示
- **状態の通知**: 検索中・完了・エラー状態の適切な通知
- **結果の読み上げ**: 検索結果数や内容の音声フィードバック

### 視覚的配慮
- **高コントラスト**: 十分な色の差による視認性
- **サイズ調整**: ズーム時の適切な表示維持
- **カラーブラインド**: 色に依存しない機能設計
        `,
      },
    },
  },
  tags: ['autodocs'],
}

export default meta
type Story = StoryObj<typeof meta>

export const Default: Story = {
  parameters: {
    docs: {
      description: {
        story:
          '標準的な検索フィールドの表示。プレースホルダーテキストと検索アイコンを含みます。',
      },
    },
  },
}

export const MobileView: Story = {
  parameters: {
    viewport: {
      defaultViewport: 'mobile1',
    },
    docs: {
      description: {
        story:
          'モバイルビューでの表示。フル幅で表示されタッチ入力に最適化されます。',
      },
    },
  },
}

export const DesktopView: Story = {
  parameters: {
    viewport: {
      defaultViewport: 'desktop',
    },
    docs: {
      description: {
        story:
          'デスクトップビューでの表示。固定幅（25ch）でコンパクトに表示されます。',
      },
    },
  },
}
