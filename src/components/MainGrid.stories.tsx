import type { Meta, StoryObj } from '@storybook/react'
import MainGrid from './MainGrid'

const meta: Meta<typeof MainGrid> = {
  title: 'Components/Layout/MainGrid',
  component: MainGrid,
  parameters: {
    layout: 'padded',
    docs: {
      description: {
        component: `
# MainGrid（メインダッシュボードグリッド）

ダッシュボードのメインコンテンツエリアを構成するグリッドレイアウトコンポーネントです。統計カード、チャート、データテーブルを効率的に配置します。

## 設計思想

### 情報設計
- **階層的構造**: Overview → Details の論理的情報組織
- **視覚的リズム**: 一貫したスペーシングとグリッドシステム
- **プログレッシブディスクロージャー**: 概要から詳細への情報提示

### レスポンシブグリッド
- **モバイルファースト**: 小画面から段階的に拡張
- **柔軟性**: コンテンツに応じた最適なカラム配置
- **視認性**: デバイスに適したカードサイズ

## 構成セクション

### Overview セクション
ダッシュボードの重要指標を一目で把握できるサマリーエリア

#### 統計カード群（StatCard）
- **Users**: ユーザー数の推移（上昇トレンド）
- **Conversions**: コンバージョン数（下降トレンド）  
- **Event count**: イベント数（ニュートラル）
- **HighlightedCard**: 特別な注目情報

#### チャートエリア
- **SessionsChart**: セッション数の時系列推移
- **PageViewsBarChart**: ページビューの棒グラフ分析

### Details セクション  
詳細なデータ分析とドリルダウン機能を提供

#### データテーブル
- **CustomizedDataGrid**: 顧客データの詳細一覧
- **ソート・フィルター**: 高度なデータ操作機能
- **ページネーション**: 大量データの効率的な表示

#### サイドパネル
- **CustomizedTreeView**: 階層データの視覚化
- **ChartUserByCountry**: 地域別ユーザー分析

## レスポンシブ動作

### グリッドブレークポイント

#### モバイル（xs: 12）
- **フルワイド表示**: 全要素が縦に積み重ね
- **最適化されたタッチUI**: 指での操作に適したサイズ

#### タブレット（sm: 6）
- **2カラムレイアウト**: 統計カードとチャートの並列表示
- **バランス調整**: コンテンツの適切な分散

#### デスクトップ（lg: 3）
- **4カラムレイアウト**: 統計カードの横並び配置
- **効率的スペース活用**: 画面幅の最大限活用

## データフロー

### 統計データ
\`\`\`typescript
const data: StatCardProps[] = [
  {
    title: 'Users',
    value: '14k',
    interval: 'Last 30 days',
    trend: 'up',
    data: [200, 24, 220, ...] // スパークライン用データ
  }
]
\`\`\`

### 動的更新
- **リアルタイム同期**: APIからの最新データ反映
- **インクリメンタル更新**: 変更部分のみの効率的な再描画
- **エラーハンドリング**: データ取得失敗時の適切な表示

## パフォーマンス最適化

### レンダリング効率
- **Grid2 使用**: Material-UI v6の新しいグリッドシステム
- **遅延読み込み**: 重いチャートコンポーネントの段階的読み込み
- **メモ化**: 不要な再計算の防止

### データ処理
- **クライアントサイドキャッシュ**: APIレスポンスの効率的な管理
- **バッチ処理**: 複数チャートの同期更新
- **プリフェッチ**: 次に必要になるデータの先行取得

## 使用場面

### ビジネスダッシュボード
- **KPI監視**: 重要業績指標の一元管理
- **トレンド分析**: 時系列データの可視化
- **意思決定支援**: データドリブンな判断材料の提供

### 分析プラットフォーム
- **マルチメトリクス表示**: 複数指標の同時監視
- **ドリルダウン**: 概要から詳細への段階的分析
- **比較分析**: 期間や条件での比較機能

### 運用監視ツール
- **システム状態**: リアルタイムステータス表示
- **アラート管理**: 異常検知と通知機能
- **レポート生成**: 定期的な状況報告

## アクセシビリティ

### セマンティック構造
- **見出し階層**: h2要素による適切なセクション分け
- **ランドマーク**: main, sectionの適切な使用
- **スクリーンリーダー**: 論理的な読み上げ順序

### 操作性
- **キーボードナビゲーション**: Tab/Shift+Tabでの移動
- **フォーカス管理**: 明確な現在位置表示
- **ショートカット**: 効率的な操作のためのキーバインド

### 視覚的配慮
- **カラーコントラスト**: 十分な色の差による視認性
- **テキストサイズ**: 拡大時の適切な表示
- **動的コンテンツ**: 変更の明確な通知
        `,
      },
    },
  },
  tags: ['autodocs'],
}

export default meta
type Story = StoryObj<typeof meta>

export const Default: Story = {
  parameters: {
    docs: {
      description: {
        story:
          '完全なダッシュボードレイアウト。Overview（統計カードとチャート）とDetails（データグリッドとサイドパネル）の両セクションを含みます。',
      },
    },
  },
}

export const MobileView: Story = {
  parameters: {
    viewport: {
      defaultViewport: 'mobile1',
    },
    docs: {
      description: {
        story:
          'モバイルデバイスでの表示。すべての要素が縦に積み重ねて表示され、タッチ操作に最適化されます。',
      },
    },
  },
}

export const TabletView: Story = {
  parameters: {
    viewport: {
      defaultViewport: 'tablet',
    },
    docs: {
      description: {
        story:
          'タブレットデバイスでの表示。2カラムレイアウトで効率的なスペース活用を実現します。',
      },
    },
  },
}

export const DesktopView: Story = {
  parameters: {
    viewport: {
      defaultViewport: 'desktop',
    },
    docs: {
      description: {
        story:
          'デスクトップでの表示。4カラムレイアウトによる最大限のデータ表示密度を実現します。',
      },
    },
  },
}
